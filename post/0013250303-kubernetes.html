<!DOCTYPE html><html lang="ko" class="__className_c5102c"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/tech-blog/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/tech-blog/_next/static/css/1f59140b53390c8f.css" data-precedence="next"/><link rel="stylesheet" href="/tech-blog/_next/static/css/86708423b213bf15.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/tech-blog/_next/static/chunks/webpack-55be747906e2abed.js"/><script src="/tech-blog/_next/static/chunks/fd9d1056-12d0224c61359539.js" async=""></script><script src="/tech-blog/_next/static/chunks/117-d2d2b15d916da2d9.js" async=""></script><script src="/tech-blog/_next/static/chunks/main-app-dc241a590481c956.js" async=""></script><script src="/tech-blog/_next/static/chunks/679-09931d2c20ac23c4.js" async=""></script><script src="/tech-blog/_next/static/chunks/app/layout-7b9eb4963e5bd58c.js" async=""></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6151583773425822" crossorigin="anonymous"></script><script src="/tech-blog/_next/static/chunks/app/post/%5Bslug%5D/page-5fc1a46522590ee2.js" async=""></script><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"/><meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)"/><meta name="naver-site-verification" content="1df124e1d8331da4467178ffddd6188e1d413576"/><meta name="google-adsense-account" content="ca-pub-6151583773425822"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="dns-prefetch" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><title>Pod - Lifecycle | Nimkoes Tech Blog</title><meta name="description" content="기본 설명"/><meta name="application-name" content="Nimkoes Tech Blog"/><link rel="author" href="https://nimkoes.github.io/tech-blog"/><meta name="author" content="Nimkoes"/><link rel="manifest" href="/tech-blog/site.webmanifest" crossorigin="use-credentials"/><meta name="keywords" content="tech-blog,backend,software architect,infrastructure,development"/><meta name="creator" content="Nimkoes"/><meta name="publisher" content="Nimkoes"/><meta name="robots" content="index, follow, nocache"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta name="category" content="technology"/><link rel="canonical" href="https://nimkoes.github.io/tech-blog"/><link rel="alternate" hrefLang="ko-KR" href="https://nimkoes.github.io/tech-blog"/><meta name="format-detection" content="telephone=no, address=no, email=no"/><meta name="google-adsense-account" content="ca-pub-6151583773425822"/><meta property="og:title" content="Nimkoes Tech Blog - 개발자의 기술 이야기"/><meta property="og:description" content="I work diligently to become lazy ☕"/><meta property="og:url" content="https://nimkoes.github.io/tech-blog"/><meta property="og:site_name" content="Nimkoes Tech Blog"/><meta property="og:locale" content="ko_KR"/><meta property="og:image" content="https://nimkoes.github.io/tech-blog/og-image.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Nimkoes Tech Blog"/><meta property="og:image:type" content="image/png"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@nimkoes"/><meta name="twitter:creator" content="@nimkoes"/><meta name="twitter:title" content="Nimkoes Tech Blog"/><meta name="twitter:description" content="I work diligently to become lazy ☕"/><meta name="twitter:image" content="https://nimkoes.github.io/tech-blog/og-image.png"/><link rel="icon" href="/tech-blog/favicon.ico" sizes="any"/><link rel="icon" href="/tech-blog/icon.svg" type="image/svg+xml"/><link rel="icon" href="/tech-blog/favicon-32x32.png" sizes="32x32" type="image/png"/><link rel="icon" href="/tech-blog/favicon-16x16.png" sizes="16x16" type="image/png"/><link rel="apple-touch-icon" href="/tech-blog/apple-touch-icon.png" sizes="180x180" type="image/png"/><link rel="mask-icon" href="/tech-blog/safari-pinned-tab.svg" color="#5bbad5"/><meta name="next-size-adjust"/><script src="/tech-blog/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="layout_home__0Lbpw"><aside class="NavigationView_navigationView__9z_1q"><div class="NavigationView_navigation__E0_xU"><button class="Button_button__aem_D Button_icon__S9jrr Button_medium__xLUiz NavigationView_navButton__QKsJg " aria-label="카테고리 보기"></button><button class="Button_button__aem_D Button_icon__S9jrr Button_medium__xLUiz NavigationView_navButton__QKsJg " aria-label="로그 보기"></button></div></aside><div class="layout_page__rCnOA" style="height:100vh"><div class="layout_subPage__irpRs"><div class="layout_contentsView__k4Q_k contentsView"><div><header class="PostHeader_postHeader__OohTH"><h1 class="PostHeader_title__NoKGt">Pod - Lifecycle</h1><p class="PostHeader_description__moC_r"></p><div class="PostHeader_meta__9Swgx"><span>nimkoes</span><span>2021-03-02</span></div><div class="PostHeader_tags__lGQ1Q"><span class="PostHeader_tag__Jf7BC">Kubernetes</span><span class="PostHeader_tag__Jf7BC">k8s</span><span class="PostHeader_tag__Jf7BC">infra</span></div></header><div class="TableOfContents_tocWrapper__wUNrb "><div class="TableOfContents_tocBox__GAFU7"><div class="TableOfContents_tocHeader__EikQq"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="4" width="20" height="16" rx="3" stroke="#CCCCCC" stroke-width="1.5"></rect><circle cx="6" cy="8" r="1.5" fill="#CCCCCC"></circle><circle cx="6" cy="12" r="1.5" fill="#CCCCCC"></circle><circle cx="6" cy="16" r="1.5" fill="#CCCCCC"></circle><line x1="9" y1="8" x2="18" y2="8" stroke="#CCCCCC" stroke-width="1.5"></line><line x1="9" y1="12" x2="18" y2="12" stroke="#CCCCCC" stroke-width="1.5"></line><line x1="9" y1="16" x2="18" y2="16" stroke="#CCCCCC" stroke-width="1.5"></line></svg><span class="TableOfContents_tocText__Mmsk2">Table of Contents</span></div><ul></ul></div></div><article class="page_markdown__SVl4d"><div class="KakaoAdFit_adContainer__TWxMq page_topAd__ctbB7"></div><div></div><div class="GoogleAdsense_adContainer__8AKIp page_middleAd__4qBOv"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6151583773425822" data-ad-slot="your-ad-slot-id" data-ad-format="auto" data-full-width-responsive="true"></ins></div><div><p>Pod 에는 Lifecycle 이 존재하고 어떤 Pod 든 만들어지고 사라지는 과정을 거치게 된다. Lifecycle 은 각 단계 별로 하는 행동이 다르다는 특징을 갖는다. Pod 역시 단계별로 주요 행동들이 있고,
앞으로 알아 볼 ReadinessProbe, LivenessProbe, Qos, Policy 등 다양한 기능들이 Pod 의 특정 단계와 관련이 있기 때문에 Lifecycle 에 대해 잘 알아야 한다.</p>
<p>Pod 를 생성하고 나면 아래와 같이 Status 에 대한 값을 확인할 수 있다.</p>
<pre><code class="hljs language-yml"><span class="hljs-attr">status:</span>
  <span class="hljs-attr">phase:</span> <span class="hljs-string">Pending</span>
  <span class="hljs-attr">conditions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Initialized</span>
      <span class="hljs-attr">status:</span> <span class="hljs-string">'True'</span>
      <span class="hljs-attr">lastProbeTime:</span> <span class="hljs-literal">null</span>
      <span class="hljs-attr">lastTransitionTime:</span> <span class="hljs-string">'2019-09-26T22:07:56Z'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">PodScheduled</span>
      <span class="hljs-attr">status:</span> <span class="hljs-string">'True'</span>
      <span class="hljs-attr">lastProbeTime:</span> <span class="hljs-literal">null</span>
      <span class="hljs-attr">lastTransitionTime:</span> <span class="hljs-string">'2019-09-26T22:07:56Z'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">ContainersReady</span>
      <span class="hljs-attr">status:</span> <span class="hljs-string">'False'</span>
      <span class="hljs-attr">lastProbeTime:</span> <span class="hljs-literal">null</span>
      <span class="hljs-attr">lastTransitionTime:</span> <span class="hljs-string">'2019-09-26T22:08:11Z'</span>
      <span class="hljs-attr">reason:</span> <span class="hljs-string">ContainersNotReady</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Ready</span>
      <span class="hljs-attr">status:</span> <span class="hljs-string">'False'</span>
      <span class="hljs-attr">lastProbeTime:</span> <span class="hljs-literal">null</span>
      <span class="hljs-attr">lastTransitionTime:</span> <span class="hljs-string">'2019-09-26T22:08:11Z'</span>
      <span class="hljs-attr">reason:</span> <span class="hljs-string">ContainersNotReady</span>


<span class="hljs-attr">containerStatuses:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">container</span>
    <span class="hljs-attr">state:</span>
      <span class="hljs-attr">waiting:</span>
        <span class="hljs-attr">reason:</span> <span class="hljs-string">ContainerCreating</span>
      <span class="hljs-attr">lastState:</span> { }
      <span class="hljs-attr">ready:</span> <span class="hljs-literal">false</span>
      <span class="hljs-attr">restartCount:</span> <span class="hljs-number">0</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">tmkube/init</span>
      <span class="hljs-attr">imageID:</span> <span class="hljs-string">""</span>
      <span class="hljs-attr">started:</span> <span class="hljs-literal">false</span>
</code></pre>
<p>상기 내용에 대한 전체적인 구조는 아래와 같다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-01.png" alt="0013-01"></p>
<ol>
<li>Pod > Status > Phase : Pod 의 전체 상태를 대표하는 속성
<ol>
<li>Pending</li>
<li>Running</li>
<li>Succeeded</li>
<li>Failed</li>
<li>Unknown</li>
</ol>
</li>
<li>Pod > Status > Conditions : Pod 가 생성 되면서 실행하는 각 단계와 단계의 상태를 알려주는 속성
<ol>
<li>Conditions
<ol>
<li>Initialized</li>
<li>ContainerReady</li>
<li>PodScheduled</li>
<li>Ready</li>
</ol>
</li>
<li>Reason
<ol>
<li>ContainersNotReady</li>
<li>PodCompleted</li>
</ol>
</li>
</ol>
</li>
<li>Pod > Containers > State : Pod 안에 있는 각 Container 를 대표하는 상태
<ol>
<li>State
<ol>
<li>Waiting</li>
<li>Running</li>
<li>Terminated</li>
</ol>
</li>
<li>Reason
<ol>
<li>ContainerCreating</li>
<li>CrashLoopBackOff</li>
<li>Error</li>
<li>Completed</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>Pod 의 전체 상태를 나타내는 것이 Phase 라고 했는데 이 상태가 어떻게 바뀌고 바뀜에 따라 Pod 의 Container 동작이 어떻게 달라지는지 정리 한다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-03.gif" alt="0013-03"></p>
<hr>
<p><img src="/tech-blog/resources/images/kubernetes/0013-04.png" alt="0013-04"></p>
<p>Pod 의 최초 상태는 Pending 이다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-05.png" alt="0013-05"></p>
<p>띄우려고 하는 Container 가 기동되기 전에 초기화 해야 하는 내용이 있는 경우 그 내용을 담는 initContainer 가 있다. 만약 Volume 이나 보안 설정을 위해 사전 설정을 해야 하는 등의 경우에
해당 한다.</p>
<pre><code class="hljs language-yml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">myapp-pod</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">myapp</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">containers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">myapp-container</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">busybox:1.28</span>
      <span class="hljs-attr">command:</span> [ <span class="hljs-string">'sh'</span>, <span class="hljs-string">'-c'</span>, <span class="hljs-string">'echo The app is running! &#x26;&#x26; sleep 3600'</span> ]
  <span class="hljs-attr">initContainers:</span> <span class="hljs-comment"># Pod 생성 내용 안에 initContainers 항목으로 초기화 스크립트를 삽입할 수 있다.</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">init-myservice</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">busybox:1.28</span>
      <span class="hljs-attr">command:</span> [ <span class="hljs-string">'sh'</span>, <span class="hljs-string">'-c'</span>, <span class="hljs-string">'until nslookup myservice; do echo waiting for myservice; sleep 2; done;'</span> ]
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">init-mydb</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">busybox:1.28</span>
      <span class="hljs-attr">command:</span> [ <span class="hljs-string">'sh'</span>, <span class="hljs-string">'-c'</span>, <span class="hljs-string">'unitl mslookup mydb; do echo waiting for mydb; sleep 2; done;'</span> ]
</code></pre>
<p><img src="/tech-blog/resources/images/kubernetes/0013-06.png" alt="0013-06"></p>
<p>initContainer 가 정상적으로 실행 되었거나, Pod 에 설정되어 있지 않았을 경우 Initialized 값이 True 가 되고 실패했을 경우 False 가 된다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-07.png" alt="0013-07"></p>
<p>이 Pod 가 올라갈 Node 는 직접 지정한 경우 그 node 에, 지정하지 않은 경우 k8s 가 자원의 상황을 판단하여 올라갈 Node 를 결정 한다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-08.png" alt="0013-08"></p>
<p>Pod 가 올라갈 Node 선정이 완료 되면 PodScheduled 값은 True 가 된다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-09.png" alt="0013-09"></p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-10.png" alt="0013-10"></p>
<p>Container 에 image 를 다운로드 한다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-11.png" alt="0013-11"></p>
<p>Node 를 선정하고 image 를 다운받는 동안 Container 의 상태는 Waiting 이고 reason 은 ContainerCreating 이다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-12.png" alt="0013-12"></p>
<p>본격적으로 Container 가 기동 되면서 Pod 와 Container 의 상태는 Running 이 된다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-13.png" alt="0013-13"></p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-14.png" alt="0013-14"></p>
<p>보통 정상적으로 기동이 될 수도 있지만 하나 또는 모든 Container 가 기동 중 문제가 발생하여 재 시작 될 수 있다. 문제가 발생한 경우 Container 의 상태는 Waiting 이고
CrashLoopBackOff 라는 reason 값을 가진다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-15.png" alt="0013-15"></p>
<p>Pod 는 Container 의 이런 상태들에 대해 Running 이라고 간주하고, 대신 내부 Condition 에 ContainerReady 와 Ready 값은 False 로 가진다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-16.png" alt="0013-16"></p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-17.png" alt="0013-17"></p>
<p>결국 모든 Container 들이 정상적으로 기동 되어 동작 한다면 Condition 들은 모두 True 값이 된다.</p>
<p>그래서 서비스가 계속 운영 되어야 하는 경우 이 status 가 True 인 상태를 계속 유지해야 한다.</p>
<p>여기서 기억해야 할 것은 Pod 의 상태가 Running 이더라도 내부 Container 들의 상태가 Running 이 아닐 수 있기 때문에 Pod 뿐만 아니라 Container 의 상태도 모니터링 해야 한다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-18.png" alt="0013-18"></p>
<p>Job 이나 CronJob 으로 생성 된 Pod 의 경우 자신의 일을 수행 했을 때는 Running 중 이지만, 일을 마치고 나면 Pod 는 더 이상 일을 하지 않는 상태가 된다. 이 때 Pod 의 상태는
Failed 나 Succeeded 두 가지 중 하나를 갖는다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-19.png" alt="0013-19"></p>
<p>만약 작업을 하고 있는 Container 중에 하나라도 문제가 생겨 에러가 발생 하면 Pod 의 상태는 Failed 가 된다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-20.png" alt="0013-20"></p>
<p>Container 들이 모두 Completed 로 일들을 잘 마쳤을 때 Succeeded 가 된다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-21.png" alt="0013-21"></p>
<p>이때 또 Pod 의 Condition 값이 변하게 되는데, 성패 여부를 떠나 ContainerReadty 와 Reday 의 값이 False 로 바뀌게 된다.</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-22.png" alt="0013-22"></p>
<p>추가적인 경우로 Pending 중에 바로 Failed 로 빠지는 경우도 있고</p>
<p><img src="/tech-blog/resources/images/kubernetes/0013-23.png" alt="0013-23"></p>
<p>Pending 이나 Running 중에 통신 장애가 발생하면 Pod 가 Unknown 상태로 바뀌게 된다. 통신 장애 복구가 빨리 이루어지면 다시 기초 상태로 변경 되지만 이 상태가 오래 지속 되면 Failed 로
가기도 한다.</p></div><div class="GoogleAdsense_adContainer__8AKIp page_bottomAd__f0OO_"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6151583773425822" data-ad-slot="your-ad-slot-id" data-ad-format="auto" data-full-width-responsive="true"></ins></div></article></div><div class="page_floatingButtons__qJiZU"><button class="GoToHome_goToHome__Es1L5"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 2L2 7V14H6V9H10V14H14V7L8 2Z" fill="currentColor"></path></svg></button></div><button class="ScrollToTop_scrollToTop__7NKxR " aria-label="Scroll to top" type="button"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3L3 8M8 3L13 8M8 3V13"></path></svg></button></div></div></div><script src="/tech-blog/_next/static/chunks/webpack-55be747906e2abed.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/tech-blog/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/tech-blog/_next/static/css/1f59140b53390c8f.css\",\"style\"]\n3:HL[\"/tech-blog/_next/static/css/86708423b213bf15.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[2846,[],\"\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[4829,[\"679\",\"static/chunks/679-09931d2c20ac23c4.js\",\"185\",\"static/chunks/app/layout-7b9eb4963e5bd58c.js\"],\"default\"]\nc:I[1060,[],\"\"]\n8:[\"slug\",\"0013250303-kubernetes\",\"d\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L4\",null,{\"buildId\":\"DYD_M1rFU_vsFyhVUDeH2\",\"assetPrefix\":\"/tech-blog\",\"urlParts\":[\"\",\"post\",\"0013250303-kubernetes\"],\"initialTree\":[\"\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"0013250303-kubernetes\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"0013250303-kubernetes\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"0013250303-kubernetes\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/tech-blog/_next/static/css/86708423b213bf15.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/tech-blog/_next/static/css/1f59140b53390c8f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"className\":\"__className_c5102c\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#ffffff\",\"media\":\"(prefers-color-scheme: light)\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000000\",\"media\":\"(prefers-color-scheme: dark)\"}],[\"$\",\"meta\",null,{\"name\":\"naver-site-verification\",\"content\":\"1df124e1d8331da4467178ffddd6188e1d413576\"}],[\"$\",\"meta\",null,{\"name\":\"google-adsense-account\",\"content\":\"ca-pub-6151583773425822\"}],[\"$\",\"link\",null,{\"rel\":\"dns-prefetch\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"dns-prefetch\",\"href\":\"https://fonts.gstatic.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6151583773425822\",\"crossOrigin\":\"anonymous\"}]]}],[\"$\",\"$La\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]\n"])</script><script>self.__next_f.push([1,"e:I[2089,[\"605\",\"static/chunks/app/post/%5Bslug%5D/page-5fc1a46522590ee2.js\"],\"default\"]\nf:I[3299,[\"605\",\"static/chunks/app/post/%5Bslug%5D/page-5fc1a46522590ee2.js\"],\"default\"]\n10:I[1040,[\"605\",\"static/chunks/app/post/%5Bslug%5D/page-5fc1a46522590ee2.js\"],\"default\"]\n12:I[2786,[\"605\",\"static/chunks/app/post/%5Bslug%5D/page-5fc1a46522590ee2.js\"],\"default\"]\n13:I[6798,[\"605\",\"static/chunks/app/post/%5Bslug%5D/page-5fc1a46522590ee2.js\"],\"default\"]\n11:T2c86,"])</script><script>self.__next_f.push([1,"\u003cp\u003ePod 에는 Lifecycle 이 존재하고 어떤 Pod 든 만들어지고 사라지는 과정을 거치게 된다. Lifecycle 은 각 단계 별로 하는 행동이 다르다는 특징을 갖는다. Pod 역시 단계별로 주요 행동들이 있고,\n앞으로 알아 볼 ReadinessProbe, LivenessProbe, Qos, Policy 등 다양한 기능들이 Pod 의 특정 단계와 관련이 있기 때문에 Lifecycle 에 대해 잘 알아야 한다.\u003c/p\u003e\n\u003cp\u003ePod 를 생성하고 나면 아래와 같이 Status 에 대한 값을 확인할 수 있다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yml\"\u003e\u003cspan class=\"hljs-attr\"\u003estatus:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ephase:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePending\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003econditions:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eInitialized\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estatus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'True'\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastProbeTime:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastTransitionTime:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'2019-09-26T22:07:56Z'\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePodScheduled\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estatus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'True'\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastProbeTime:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastTransitionTime:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'2019-09-26T22:07:56Z'\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eContainersReady\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estatus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'False'\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastProbeTime:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastTransitionTime:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'2019-09-26T22:08:11Z'\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ereason:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eContainersNotReady\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eReady\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estatus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'False'\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastProbeTime:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastTransitionTime:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'2019-09-26T22:08:11Z'\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ereason:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eContainersNotReady\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-attr\"\u003econtainerStatuses:\u003c/span\u003e\n  \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003econtainer\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003estate:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ewaiting:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ereason:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eContainerCreating\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003elastState:\u003c/span\u003e { }\n      \u003cspan class=\"hljs-attr\"\u003eready:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erestartCount:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etmkube/init\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eimageID:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estarted:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e상기 내용에 대한 전체적인 구조는 아래와 같다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-01.png\" alt=\"0013-01\"\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003ePod \u003e Status \u003e Phase : Pod 의 전체 상태를 대표하는 속성\n\u003col\u003e\n\u003cli\u003ePending\u003c/li\u003e\n\u003cli\u003eRunning\u003c/li\u003e\n\u003cli\u003eSucceeded\u003c/li\u003e\n\u003cli\u003eFailed\u003c/li\u003e\n\u003cli\u003eUnknown\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003ePod \u003e Status \u003e Conditions : Pod 가 생성 되면서 실행하는 각 단계와 단계의 상태를 알려주는 속성\n\u003col\u003e\n\u003cli\u003eConditions\n\u003col\u003e\n\u003cli\u003eInitialized\u003c/li\u003e\n\u003cli\u003eContainerReady\u003c/li\u003e\n\u003cli\u003ePodScheduled\u003c/li\u003e\n\u003cli\u003eReady\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eReason\n\u003col\u003e\n\u003cli\u003eContainersNotReady\u003c/li\u003e\n\u003cli\u003ePodCompleted\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003ePod \u003e Containers \u003e State : Pod 안에 있는 각 Container 를 대표하는 상태\n\u003col\u003e\n\u003cli\u003eState\n\u003col\u003e\n\u003cli\u003eWaiting\u003c/li\u003e\n\u003cli\u003eRunning\u003c/li\u003e\n\u003cli\u003eTerminated\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eReason\n\u003col\u003e\n\u003cli\u003eContainerCreating\u003c/li\u003e\n\u003cli\u003eCrashLoopBackOff\u003c/li\u003e\n\u003cli\u003eError\u003c/li\u003e\n\u003cli\u003eCompleted\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003ePod 의 전체 상태를 나타내는 것이 Phase 라고 했는데 이 상태가 어떻게 바뀌고 바뀜에 따라 Pod 의 Container 동작이 어떻게 달라지는지 정리 한다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-03.gif\" alt=\"0013-03\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-04.png\" alt=\"0013-04\"\u003e\u003c/p\u003e\n\u003cp\u003ePod 의 최초 상태는 Pending 이다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-05.png\" alt=\"0013-05\"\u003e\u003c/p\u003e\n\u003cp\u003e띄우려고 하는 Container 가 기동되기 전에 초기화 해야 하는 내용이 있는 경우 그 내용을 담는 initContainer 가 있다. 만약 Volume 이나 보안 설정을 위해 사전 설정을 해야 하는 등의 경우에\n해당 한다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yml\"\u003e\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePod\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emyapp-pod\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003elabels:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eapp:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emyapp\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003econtainers:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emyapp-container\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebusybox:1.28\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e [ \u003cspan class=\"hljs-string\"\u003e'sh'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'-c'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'echo The app is running! \u0026#x26;\u0026#x26; sleep 3600'\u003c/span\u003e ]\n  \u003cspan class=\"hljs-attr\"\u003einitContainers:\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Pod 생성 내용 안에 initContainers 항목으로 초기화 스크립트를 삽입할 수 있다.\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003einit-myservice\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebusybox:1.28\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e [ \u003cspan class=\"hljs-string\"\u003e'sh'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'-c'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'until nslookup myservice; do echo waiting for myservice; sleep 2; done;'\u003c/span\u003e ]\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003einit-mydb\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebusybox:1.28\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e [ \u003cspan class=\"hljs-string\"\u003e'sh'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'-c'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'unitl mslookup mydb; do echo waiting for mydb; sleep 2; done;'\u003c/span\u003e ]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-06.png\" alt=\"0013-06\"\u003e\u003c/p\u003e\n\u003cp\u003einitContainer 가 정상적으로 실행 되었거나, Pod 에 설정되어 있지 않았을 경우 Initialized 값이 True 가 되고 실패했을 경우 False 가 된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-07.png\" alt=\"0013-07\"\u003e\u003c/p\u003e\n\u003cp\u003e이 Pod 가 올라갈 Node 는 직접 지정한 경우 그 node 에, 지정하지 않은 경우 k8s 가 자원의 상황을 판단하여 올라갈 Node 를 결정 한다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-08.png\" alt=\"0013-08\"\u003e\u003c/p\u003e\n\u003cp\u003ePod 가 올라갈 Node 선정이 완료 되면 PodScheduled 값은 True 가 된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-09.png\" alt=\"0013-09\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-10.png\" alt=\"0013-10\"\u003e\u003c/p\u003e\n\u003cp\u003eContainer 에 image 를 다운로드 한다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-11.png\" alt=\"0013-11\"\u003e\u003c/p\u003e\n\u003cp\u003eNode 를 선정하고 image 를 다운받는 동안 Container 의 상태는 Waiting 이고 reason 은 ContainerCreating 이다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-12.png\" alt=\"0013-12\"\u003e\u003c/p\u003e\n\u003cp\u003e본격적으로 Container 가 기동 되면서 Pod 와 Container 의 상태는 Running 이 된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-13.png\" alt=\"0013-13\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-14.png\" alt=\"0013-14\"\u003e\u003c/p\u003e\n\u003cp\u003e보통 정상적으로 기동이 될 수도 있지만 하나 또는 모든 Container 가 기동 중 문제가 발생하여 재 시작 될 수 있다. 문제가 발생한 경우 Container 의 상태는 Waiting 이고\nCrashLoopBackOff 라는 reason 값을 가진다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-15.png\" alt=\"0013-15\"\u003e\u003c/p\u003e\n\u003cp\u003ePod 는 Container 의 이런 상태들에 대해 Running 이라고 간주하고, 대신 내부 Condition 에 ContainerReady 와 Ready 값은 False 로 가진다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-16.png\" alt=\"0013-16\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-17.png\" alt=\"0013-17\"\u003e\u003c/p\u003e\n\u003cp\u003e결국 모든 Container 들이 정상적으로 기동 되어 동작 한다면 Condition 들은 모두 True 값이 된다.\u003c/p\u003e\n\u003cp\u003e그래서 서비스가 계속 운영 되어야 하는 경우 이 status 가 True 인 상태를 계속 유지해야 한다.\u003c/p\u003e\n\u003cp\u003e여기서 기억해야 할 것은 Pod 의 상태가 Running 이더라도 내부 Container 들의 상태가 Running 이 아닐 수 있기 때문에 Pod 뿐만 아니라 Container 의 상태도 모니터링 해야 한다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-18.png\" alt=\"0013-18\"\u003e\u003c/p\u003e\n\u003cp\u003eJob 이나 CronJob 으로 생성 된 Pod 의 경우 자신의 일을 수행 했을 때는 Running 중 이지만, 일을 마치고 나면 Pod 는 더 이상 일을 하지 않는 상태가 된다. 이 때 Pod 의 상태는\nFailed 나 Succeeded 두 가지 중 하나를 갖는다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-19.png\" alt=\"0013-19\"\u003e\u003c/p\u003e\n\u003cp\u003e만약 작업을 하고 있는 Container 중에 하나라도 문제가 생겨 에러가 발생 하면 Pod 의 상태는 Failed 가 된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-20.png\" alt=\"0013-20\"\u003e\u003c/p\u003e\n\u003cp\u003eContainer 들이 모두 Completed 로 일들을 잘 마쳤을 때 Succeeded 가 된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-21.png\" alt=\"0013-21\"\u003e\u003c/p\u003e\n\u003cp\u003e이때 또 Pod 의 Condition 값이 변하게 되는데, 성패 여부를 떠나 ContainerReadty 와 Reday 의 값이 False 로 바뀌게 된다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-22.png\" alt=\"0013-22\"\u003e\u003c/p\u003e\n\u003cp\u003e추가적인 경우로 Pending 중에 바로 Failed 로 빠지는 경우도 있고\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/tech-blog/resources/images/kubernetes/0013-23.png\" alt=\"0013-23\"\u003e\u003c/p\u003e\n\u003cp\u003ePending 이나 Running 중에 통신 장애가 발생하면 Pod 가 Unknown 상태로 바뀌게 된다. 통신 장애 복구가 빨리 이루어지면 다시 기초 상태로 변경 되지만 이 상태가 오래 지속 되면 Failed 로\n가기도 한다.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[[\"$\",\"header\",null,{\"className\":\"PostHeader_postHeader__OohTH\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"PostHeader_title__NoKGt\",\"children\":\"Pod - Lifecycle\"}],[\"$\",\"p\",null,{\"className\":\"PostHeader_description__moC_r\",\"children\":\"\"}],[\"$\",\"div\",null,{\"className\":\"PostHeader_meta__9Swgx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"$undefined\",\"children\":\"nimkoes\"}],[\"$\",\"span\",null,{\"className\":\"$undefined\",\"children\":\"2021-03-02\"}]]}],[\"$\",\"div\",null,{\"className\":\"PostHeader_tags__lGQ1Q\",\"children\":[[\"$\",\"span\",\"Kubernetes\",{\"className\":\"PostHeader_tag__Jf7BC\",\"children\":\"Kubernetes\"}],[\"$\",\"span\",\"k8s\",{\"className\":\"PostHeader_tag__Jf7BC\",\"children\":\"k8s\"}],[\"$\",\"span\",\"infra\",{\"className\":\"PostHeader_tag__Jf7BC\",\"children\":\"infra\"}]]}]]}],[\"$\",\"$Le\",null,{}],[\"$\",\"article\",null,{\"className\":\"page_markdown__SVl4d\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"page_topAd__ctbB7\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\"}}],[\"$\",\"$L10\",null,{\"className\":\"page_middleAd__4qBOv\",\"client\":\"ca-pub-6151583773425822\",\"slot\":\"your-ad-slot-id\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}],[\"$\",\"$L10\",null,{\"className\":\"page_bottomAd__f0OO_\",\"client\":\"ca-pub-6151583773425822\",\"slot\":\"your-ad-slot-id\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"page_floatingButtons__qJiZU\",\"children\":[\"$\",\"$L12\",null,{}]}],[\"$\",\"$L13\",null,{}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Pod - Lifecycle | Nimkoes Tech Blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"기본 설명\"}],[\"$\",\"meta\",\"4\",{\"name\":\"application-name\",\"content\":\"Nimkoes Tech Blog\"}],[\"$\",\"link\",\"5\",{\"rel\":\"author\",\"href\":\"https://nimkoes.github.io/tech-blog\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Nimkoes\"}],[\"$\",\"link\",\"7\",{\"rel\":\"manifest\",\"href\":\"/tech-blog/site.webmanifest\",\"crossOrigin\":\"use-credentials\"}],[\"$\",\"meta\",\"8\",{\"name\":\"keywords\",\"content\":\"tech-blog,backend,software architect,infrastructure,development\"}],[\"$\",\"meta\",\"9\",{\"name\":\"creator\",\"content\":\"Nimkoes\"}],[\"$\",\"meta\",\"10\",{\"name\":\"publisher\",\"content\":\"Nimkoes\"}],[\"$\",\"meta\",\"11\",{\"name\":\"robots\",\"content\":\"index, follow, nocache\"}],[\"$\",\"meta\",\"12\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"13\",{\"name\":\"category\",\"content\":\"technology\"}],[\"$\",\"link\",\"14\",{\"rel\":\"canonical\",\"href\":\"https://nimkoes.github.io/tech-blog\"}],[\"$\",\"link\",\"15\",{\"rel\":\"alternate\",\"hrefLang\":\"ko-KR\",\"href\":\"https://nimkoes.github.io/tech-blog\"}],[\"$\",\"meta\",\"16\",{\"name\":\"format-detection\",\"content\":\"telephone=no, address=no, email=no\"}],[\"$\",\"meta\",\"17\",{\"name\":\"google-adsense-account\",\"content\":\"ca-pub-6151583773425822\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:title\",\"content\":\"Nimkoes Tech Blog - 개발자의 기술 이야기\"}],[\"$\",\"meta\",\"19\",{\"property\":\"og:description\",\"content\":\"I work diligently to become lazy ☕\"}],[\"$\",\"meta\",\"20\",{\"property\":\"og:url\",\"content\":\"https://nimkoes.github.io/tech-blog\"}],[\"$\",\"meta\",\"21\",{\"property\":\"og:site_name\",\"content\":\"Nimkoes Tech Blog\"}],[\"$\",\"meta\",\"22\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"23\",{\"property\":\"og:image\",\"content\":\"https://nimkoes.github.io/tech-blog/og-image.png\"}],[\"$\",\"meta\",\"24\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"25\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"26\",{\"property\":\"og:image:alt\",\"content\":\"Nimkoes Tech Blog\"}],[\"$\",\"meta\",\"27\",{\"property\":\"og:image:type\",\"content\":\"image/png\"}],[\"$\",\"meta\",\"28\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"29\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"30\",{\"name\":\"twitter:site\",\"content\":\"@nimkoes\"}],[\"$\",\"meta\",\"31\",{\"name\":\"twitter:creator\",\"content\":\"@nimkoes\"}],[\"$\",\"meta\",\"32\",{\"name\":\"twitter:title\",\"content\":\"Nimkoes Tech Blog\"}],[\"$\",\"meta\",\"33\",{\"name\":\"twitter:description\",\"content\":\"I work diligently to become lazy ☕\"}],[\"$\",\"meta\",\"34\",{\"name\":\"twitter:image\",\"content\":\"https://nimkoes.github.io/tech-blog/og-image.png\"}],[\"$\",\"link\",\"35\",{\"rel\":\"icon\",\"href\":\"/tech-blog/favicon.ico\",\"sizes\":\"any\"}],[\"$\",\"link\",\"36\",{\"rel\":\"icon\",\"href\":\"/tech-blog/icon.svg\",\"type\":\"image/svg+xml\"}],[\"$\",\"link\",\"37\",{\"rel\":\"icon\",\"href\":\"/tech-blog/favicon-32x32.png\",\"sizes\":\"32x32\",\"type\":\"image/png\"}],[\"$\",\"link\",\"38\",{\"rel\":\"icon\",\"href\":\"/tech-blog/favicon-16x16.png\",\"sizes\":\"16x16\",\"type\":\"image/png\"}],[\"$\",\"link\",\"39\",{\"rel\":\"apple-touch-icon\",\"href\":\"/tech-blog/apple-touch-icon.png\",\"sizes\":\"180x180\",\"type\":\"image/png\"}],[\"$\",\"link\",\"40\",{\"rel\":\"mask-icon\",\"href\":\"/tech-blog/safari-pinned-tab.svg\",\"color\":\"#5bbad5\"}],[\"$\",\"meta\",\"41\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script></body></html>